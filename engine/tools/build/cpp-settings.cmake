set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

set(COMPILE_OPTIONS "")
set(LINK_OPTIONS "")

if (WIN32)
    set(COMPILE_OPTIONS ${COMPILE_OPTIONS} -D_CRT_SECURE_NO_WARNINGS=1)
    set(COMPILE_OPTIONS ${COMPILE_OPTIONS} -D_CRT_SECURE_NO_WARNINGS_GLOBALS=1)
    set(COMPILE_OPTIONS ${COMPILE_OPTIONS} -D_WINDOWS)

    # Platform type define.
    set(LINK_OPTIONS ${LINK_OPTIONS} /SUBSYSTEM:WINDOWS)
endif()

# Generate debug information for all configs
set(COMPILE_OPTIONS ${COMPILE_OPTIONS} /Zi /W3 /WX)
set(LINK_OPTIONS ${LINK_OPTIONS} /DEBUG)

# Use multithread
set(COMPILE_OPTIONS ${COMPILE_OPTIONS} /MP)

set(DEBUG_COMPILE_OPTIONS   ${COMPILE_OPTIONS} -D_DEBUG)
set(PROFILE_COMPILE_OPTIONS ${COMPILE_OPTIONS} -D_PROFILE)
set(RELEASE_COMPILE_OPTIONS ${COMPILE_OPTIONS} -D_RELEASE)

set(DEBUG_LINK_OPTIONS   ${LINK_OPTIONS})
set(PROFILE_LINK_OPTIONS ${LINK_OPTIONS})
set(RELEASE_LINK_OPTIONS ${LINK_OPTIONS})

add_compile_options(
    "$<$<CONFIG:Debug>:${DEBUG_COMPILE_OPTIONS}>"
    "$<$<CONFIG:Profile>:${PROFILE_COMPILE_OPTIONS}>"
    "$<$<CONFIG:Release>:${RELEASE_COMPILE_OPTIONS}>"
)

add_link_options(
    "$<$<CONFIG:Debug>:${DEBUG_LINK_OPTIONS}>"
    "$<$<CONFIG:Profile>:${PROFILE_LINK_OPTIONS}>"
    "$<$<CONFIG:Release>:${RELEASE_LINK_OPTIONS}>"
)